<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apilesbordes - Miel artisanal</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fffbee; color:#333; }
    header { background:#f6c90e; padding:20px; text-align:center; font-size:28px; font-weight:bold; color:#3e2f00; }
    section { padding:20px; text-align:center; }
    .products { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; }
    .product { background:#fff8d9; border-radius:12px; padding:20px; width:320px; box-shadow:0 4px 8px rgba(0,0,0,0.1); text-align:center; }
    .product img { max-width:100%; border-radius:12px; }
    h3 { margin:10px 0; }
    h4 { margin:10px 0 5px; color:#444; }
    select { margin:8px 0; padding:6px; border-radius:6px; }
    footer { text-align:center; padding:20px; background:#f6c90e; margin-top:20px; }
    .note { margin-top:20px; font-style:italic; font-weight:bold; color:#a00; }
    .relay-item { border:1px solid #ccc; padding:10px; margin:5px; cursor:pointer; border-radius:6px; }
    .relay-item:hover { background:#f0f0f0; }
  </style>
</head>
<body>
  <!-- Script PayPal -->
  <script src="https://www.paypal.com/sdk/js?client-id=BAAKdibcjfq3zIS83uVKN9R6ZokO_hZe3nKWAzIiX1Kqor-AlXWg0u_PADbEJP1nE1Oy6oRlj9wq8xaEjU&components=hosted-buttons&disable-funding=venmo&currency=EUR"></script>

  <header>🍯 Apilesbordes - Miel artisanal</header>

  <section>
    <h2>Nos miels</h2>
    <p>Miels 100% naturels, récoltés avec passion en Sologne et en Forêt.</p>
  </section>

  <!-- ================= PRODUITS ================= -->
  <section>
    <h2>🍯 Miel de Sologne</h2>
    <div class="products">
      <!-- 250g -->
      <div class="product">
        <h3>Pot 250g</h3>
        <img src="images/miel_sologne_250.jpg" alt="Miel de Sologne 250g">
        <h4>Retrait</h4>
        <select id="SOLOGNE250-RETRAIT" onchange="updateButton('SOLOGNE250-RETRAIT')">
          <option value="1">1 pot – 5 €</option>
          <option value="2">2 pots – 10 €</option>
          <option value="3">3 pots – 15 €</option>
        </select>
        <div id="paypal-SOLOGNE250-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 250g – Retrait','SOLOGNE250-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="SOLOGNE250-COLISSIMO" onchange="updateButton('SOLOGNE250-COLISSIMO')">
          <option value="1">1 pot – 12,35 €</option>
          <option value="2">2 pots – 19,40 €</option>
          <option value="3">3 pots – 28,10 €</option>
        </select>
        <div id="paypal-SOLOGNE250-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 250g – Colissimo','SOLOGNE250-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="SOLOGNE250-RELAY" onchange="updateButton('SOLOGNE250-RELAY')">
          <option value="1">1 pot – 9,40 €</option>
          <option value="2">2 pots – 15,40 €</option>
          <option value="3">3 pots – 21,40 €</option>
        </select>
        <div id="paypal-SOLOGNE250-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 250g – Mondial Relay','SOLOGNE250-RELAY')">📝 Remplir le formulaire</a>
      </div>

      <!-- 500g -->
      <div class="product">
        <h3>Pot 500g</h3>
        <img src="images/miel_sologne_500.jpg" alt="Miel de Sologne 500g">
        <h4>Retrait</h4>
        <select id="SOLOGNE500-RETRAIT" onchange="updateButton('SOLOGNE500-RETRAIT')">
          <option value="1">1 pot – 7 €</option>
          <option value="2">2 pots – 14 €</option>
          <option value="3">3 pots – 21 €</option>
        </select>
        <div id="paypal-SOLOGNE500-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 500g – Retrait','SOLOGNE500-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="SOLOGNE500-COLISSIMO" onchange="updateButton('SOLOGNE500-COLISSIMO')">
          <option value="1">1 pot – 16,40 €</option>
          <option value="2">2 pots – 27,10 €</option>
          <option value="3">3 pots – 35,65 €</option>
        </select>
        <div id="paypal-SOLOGNE500-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 500g – Colissimo','SOLOGNE500-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="SOLOGNE500-RELAY" onchange="updateButton('SOLOGNE500-RELAY')">
          <option value="1">1 pot – 12,40 €</option>
          <option value="2">2 pots – 20,40 €</option>
          <option value="3">3 pots – 28,40 €</option>
        </select>
        <div id="paypal-SOLOGNE500-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 500g – Mondial Relay','SOLOGNE500-RELAY')">📝 Remplir le formulaire</a>
      </div>

      <!-- 1kg -->
      <div class="product">
        <h3>Pot 1kg</h3>
        <img src="images/miel_sologne_1kg.jpg" alt="Miel de Sologne 1kg">
        <h4>Retrait</h4>
        <select id="SOLOGNE1KG-RETRAIT" onchange="updateButton('SOLOGNE1KG-RETRAIT')">
          <option value="1">1 pot – 13 €</option>
          <option value="2">2 pots – 26 €</option>
          <option value="3">3 pots – 39 €</option>
        </select>
        <div id="paypal-SOLOGNE1KG-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 1kg – Retrait','SOLOGNE1KG-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="SOLOGNE1KG-COLISSIMO" onchange="updateButton('SOLOGNE1KG-COLISSIMO')">
          <option value="1">1 pot – 26,10 €</option>
          <option value="2">2 pots – 40,65 €</option>
          <option value="3">3 pots – 53,65 €</option>
        </select>
        <div id="paypal-SOLOGNE1KG-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 1kg – Colissimo','SOLOGNE1KG-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="SOLOGNE1KG-RELAY" onchange="updateButton('SOLOGNE1KG-RELAY')">
          <option value="1">1 pot – 19,40 €</option>
          <option value="2">2 pots – 33,40 €</option>
          <option value="3" disabled>3 pots – ❌ Non disponible</option>
        </select>
        <div id="paypal-SOLOGNE1KG-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Sologne – 1kg – Mondial Relay','SOLOGNE1KG-RELAY')">📝 Remplir le formulaire</a>
      </div>
    </div>
  </section>

  <!-- ================= MIEL DE FORET ================= -->
  <section>
    <h2>🌲 Miel de Forêt</h2>
    <div class="products">
      <!-- 250g -->
      <div class="product">
        <h3>Pot 250g</h3>
        <img src="images/miel_foret_250.jpg" alt="Miel de Forêt 250g">
        <h4>Retrait</h4>
        <select id="FORET250-RETRAIT" onchange="updateButton('FORET250-RETRAIT')">
          <option value="1">1 pot – 5 €</option>
          <option value="2">2 pots – 10 €</option>
          <option value="3">3 pots – 15 €</option>
        </select>
        <div id="paypal-FORET250-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 250g – Retrait','FORET250-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="FORET250-COLISSIMO" onchange="updateButton('FORET250-COLISSIMO')">
          <option value="1">1 pot – 12,35 €</option>
          <option value="2">2 pots – 19,40 €</option>
          <option value="3">3 pots – 28,10 €</option>
        </select>
        <div id="paypal-FORET250-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 250g – Colissimo','FORET250-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="FORET250-RELAY" onchange="updateButton('FORET250-RELAY')">
          <option value="1">1 pot – 9,40 €</option>
          <option value="2">2 pots – 15,40 €</option>
          <option value="3">3 pots – 21,40 €</option>
        </select>
        <div id="paypal-FORET250-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 250g – Mondial Relay','FORET250-RELAY')">📝 Remplir le formulaire</a>
      </div>

      <!-- 500g -->
      <div class="product">
        <h3>Pot 500g</h3>
        <img src="images/miel_foret_500.jpg" alt="Miel de Forêt 500g">
        <h4>Retrait</h4>
        <select id="FORET500-RETRAIT" onchange="updateButton('FORET500-RETRAIT')">
          <option value="1">1 pot – 7 €</option>
          <option value="2">2 pots – 14 €</option>
          <option value="3">3 pots – 21 €</option>
        </select>
        <div id="paypal-FORET500-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 500g – Retrait','FORET500-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="FORET500-COLISSIMO" onchange="updateButton('FORET500-COLISSIMO')">
          <option value="1">1 pot – 16,40 €</option>
          <option value="2">2 pots – 27,10 €</option>
          <option value="3">3 pots – 35,65 €</option>
        </select>
        <div id="paypal-FORET500-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 500g – Colissimo','FORET500-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="FORET500-RELAY" onchange="updateButton('FORET500-RELAY')">
          <option value="1">1 pot – 12,40 €</option>
          <option value="2">2 pots – 20,40 €</option>
          <option value="3">3 pots – 28,40 €</option>
        </select>
        <div id="paypal-FORET500-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 500g – Mondial Relay','FORET500-RELAY')">📝 Remplir le formulaire</a>
      </div>

      <!-- 1kg -->
      <div class="product">
        <h3>Pot 1kg</h3>
        <img src="images/miel_foret_1kg.jpg" alt="Miel de Forêt 1kg">
        <h4>Retrait</h4>
        <select id="FORET1KG-RETRAIT" onchange="updateButton('FORET1KG-RETRAIT')">
          <option value="1">1 pot – 13 €</option>
          <option value="2">2 pots – 26 €</option>
          <option value="3">3 pots – 39 €</option>
        </select>
        <div id="paypal-FORET1KG-RETRAIT"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 1kg – Retrait','FORET1KG-RETRAIT')">📝 Remplir le formulaire</a>

        <h4>Colissimo</h4>
        <select id="FORET1KG-COLISSIMO" onchange="updateButton('FORET1KG-COLISSIMO')">
          <option value="1">1 pot – 26,10 €</option>
          <option value="2">2 pots – 40,65 €</option>
          <option value="3">3 pots – 53,65 €</option>
        </select>
        <div id="paypal-FORET1KG-COLISSIMO"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 1kg – Colissimo','FORET1KG-COLISSIMO')">📝 Remplir le formulaire</a>

        <h4>Mondial Relay</h4>
        <select id="FORET1KG-RELAY" onchange="updateButton('FORET1KG-RELAY')">
          <option value="1">1 pot – 19,40 €</option>
          <option value="2">2 pots – 33,40 €</option>
          <option value="3" disabled>3 pots – ❌ Non disponible</option>
        </select>
        <div id="paypal-FORET1KG-RELAY"></div>
        <a href="#formulaire-commande" class="form-link" onclick="remplirProduit('Miel de Forêt – 1kg – Mondial Relay','FORET1KG-RELAY')">📝 Remplir le formulaire</a>
      </div>
    </div>
  </section>

  <!-- ================= FORMULAIRE DE COMMANDE ================= -->
  <section id="formulaire-commande">
    <h2>📦 Formulaire de commande</h2>
    <p>Merci de remplir ce formulaire après votre paiement PayPal.</p>

    <form action="https://formspree.io/f/mrbajnvb" method="POST">
      <label for="name">Nom et prénom :</label><br>
      <input type="text" id="name" name="name" required><br>

      <label for="address">Adresse complète :</label><br>
      <textarea id="address" name="address" rows="3" required></textarea><br>

      <label for="relay">Point Relais choisi (facultatif) :</label><br>
      <input type="text" id="relay" name="relay" placeholder="Ex: Relais Pickup Carrefour Orléans"><br>

      <label for="email">Adresse email :</label><br>
      <input type="email" id="email" name="email" required><br>

      <label for="phone">Téléphone :</label><br>
      <input type="tel" id="phone" name="phone" required><br>

      <label for="product">Produits commandés :</label><br>
      <textarea id="product" name="product" rows="4" readonly></textarea><br>

      <button type="submit">Envoyer ma commande</button>
    </form>

    <p id="confirmation" style="display:none; color:green; font-weight:bold; margin-top:10px;">
      ✅ Merci ! Votre commande a bien été transmise.
    </p>
  </section>


      </div>

      <!-- Tu répliques pour tous les autres produits comme ça -->
      <!-- Pour simplifier, je ne mets pas les 52 options ici, mais ton tableau ID01 → ID52 est déjà prêt -->
    </div>
  </section>

  <!-- ================= FORMULAIRE ================= -->
  <section>
    <h2>Confirmation de votre commande</h2>
    <form action="https://formspree.io/f/mrbajnvb" method="POST">
      <label>Nom :<br><input type="text" name="nom" required></label><br><br>
      <label>Email :<br><input type="email" name="email" required></label><br><br>
      <label>Adresse postale :<br><textarea name="adresse" required></textarea></label><br><br>
      
      <label>Code postal :<br><input type="text" id="cp" name="cp" required></label>
      <button type="button" onclick="loadRelais()">Chercher un Point Relais</button>
      <div id="relais-list"></div><br>

      <label>Point Relais choisi :<br><input type="text" id="pointrelais" name="pointrelais"></label><br><br>

      <label>Produits commandés :<br><textarea name="produits" id="produits" required></textarea></label><br><br>

      <button type="submit">✅ Confirmer la commande</button>
    </form>
    <p class="note">Pour de plus grandes quantités, m’envoyer un mail 📩</p>
  </section>

  <footer>© 2025 Apilesbordes - Tous droits réservés</footer>

  <!-- ================= SCRIPT PAYPAL ================= -->
  <script>
    const paypalIDs = {
      "ID01":"DH9HLY9ETJFY4","ID02":"V2EVFDAAVNJHL","ID03":"KSU8DPTL4D6NC",
      "ID04":"5WJ9KMY65AF5L","ID05":"6DDT8SZCQL2Z8","ID06":"G8RKH7G9WT95Y",
      "ID07":"CRN8LJEHR5RKU","ID08":"F9NVVWZTY3JUC","ID09":"KLLE7MKGE6X8L",
      "ID10":"XVV484E9L5J88","ID11":"LR5X2GYHP8JLA","ID12":"SXCTVFPL7MCNQ",
      "ID13":"775VNENGNAEDU","ID14":"P9TTVVUEKWSHU","ID15":"XRNWZB447NAZJ",
      "ID16":"D6XW2WZA7AU96","ID17":"LENQGGWVPQPNS","ID18":"5MUXDTBNX64HU",
      "ID19":"HPJS5JWGAJH2L","ID20":"JGJ6LNGEXPYVE","ID21":"75942EJVQWJYN",
      "ID22":"SR6XNDCVJ7ZNQ","ID23":"SV4RXKKW8M9ZY","ID24":"JZM9FKF638EPG",
      "ID25":"2Q5Q5TC38M7EW","ID26":"LQEBL33BSRPCE","ID27":"SD3VEEK7KLBA8",
      "ID28":"CMPHKNL52PYL4","ID29":"CCZ3ETEEQULYY","ID30":"2337EXHEWZRG2",
      "ID31":"GC97KDKHQ64RU","ID32":"YM4JPND6LTWKN","ID33":"U7JUFT42DG2Q8",
      "ID34":"MPUCYVLP886J6","ID35":"RJ66SJA3GC48A","ID36":"RBYY8K74HYSSW",
      "ID37":"FNZFYUGBTKCT6","ID38":"M3SB9FU89B6G4","ID39":"H966L25P5JWRA",
      "ID40":"LUBAANPJ4KHTW","ID41":"FKVNH874CDU6E","ID42":"Z4FWKPSCMB3FQ",
      "ID43":"5P8AQVH58GAXG","ID44":"VQ8SF4DM2QGXS","ID45":"QKHBT9AKT52AW",
      "ID46":"KFGS9H38KZPW8","ID47":"6EUEAHYBJG8AG","ID48":"YGEAXXKKKMSU8",
      "ID49":"S95WP8CY7ZPN6","ID50":"H35R5PH8B4YXA","ID51":"LEGVEK5K6TNYW",
      "ID52":"V99U9TC8JQ446"
    };

    function updateButton(ref) {
      let select = document.getElementById(ref);
      let option = select.value;
      let container = document.getElementById("paypal-" + ref);
      container.innerHTML = "";
      let buttonId = paypalIDs[option];
      if(buttonId){
        paypal.HostedButtons({ hostedButtonId: buttonId }).render("#paypal-" + ref);
        document.getElementById("produits").value = select.options[select.selectedIndex].text;
      }
    }

    // Relais Mondial Relay
    function loadRelais(){
      let cp = document.getElementById("cp").value;
      fetch("https://apilesbordes.synology.me/mondialrelay.php?cp="+cp)
        .then(r => r.json())
        .then(data => {
          let container = document.getElementById("relais-list");
          container.innerHTML = "";
          if(data.error){
            container.innerHTML = "❌ Impossible de charger la liste automatique.<br>Saisissez manuellement ci-dessous.";
            return;
          }
          data.forEach(relay => {
            let div = document.createElement("div");
            div.className = "relay-item";
            div.textContent = relay.nom+" - "+relay.adresse+" "+relay.cp+" "+relay.ville;
            div.onclick = () => {
              document.getElementById("pointrelais").value = relay.nom+" - "+relay.adresse+" "+relay.cp+" "+relay.ville;
            };
            container.appendChild(div);
          });
        })
        .catch(() => {
          document.getElementById("relais-list").innerHTML = "❌ Impossible de charger la liste automatique.<br>Saisissez manuellement ci-dessous.";
        });
    }

    // Init
    window.onload = () => {
      document.querySelectorAll("select").forEach(sel => updateButton(sel.id));
    };
  </script>
</body>
</html>
