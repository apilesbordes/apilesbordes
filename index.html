<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apilesbordes - Miel artisanal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #fffbee;
      color: #333;
    }
    header {
      background: #f6c90e;
      padding: 20px;
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      color: #3e2f00;
    }
    section {
      padding: 20px;
      text-align: center;
    }
    .products {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .product {
      background: #fff8d9;
      border-radius: 12px;
      padding: 20px;
      width: 320px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: center;
    }
    .product img {
      max-width: 100%;
      border-radius: 12px;
    }
    .price {
      font-size: 18px;
      font-weight: bold;
      margin: 10px 0;
      color: #3e2f00;
    }
    label {
      font-weight: bold;
    }
    select {
      margin: 8px 0;
      padding: 6px;
      border-radius: 6px;
    }
    footer {
      text-align: center;
      padding: 20px;
      background: #f6c90e;
      margin-top: 20px;
    }
    .note {
      margin-top: 20px;
      font-style: italic;
      font-weight: bold;
      color: #a00;
    }
    .orange {
      color: orange;
      font-weight: bold;
    }
    form {
      background: #fff8d9;
      padding: 20px;
      border-radius: 12px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: left;
    }
    form input, form textarea, form select {
      width: 100%;
      padding: 8px;
      margin: 6px 0 15px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    form button {
      background: #f6c90e;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    form button:hover {
      background: #e0b80d;
    }
  </style>
</head>
<body>
  <!-- Script PayPal global -->
  <script src="https://www.paypal.com/sdk/js?client-id=BAAKdibcjfq3zIS83uVKN9R6ZokO_hZe3nKWAzIiX1Kqor-AlXWg0u_PADbEJP1nE1Oy6oRlj9wq8xaEjU&components=hosted-buttons&disable-funding=venmo&currency=EUR"></script>

  <header>üçØ Apilesbordes - Miel artisanal</header>

  <section>
    <h2>Nos miels</h2>
    <p>Miels 100% naturels, r√©colt√©s avec passion en Sologne et en For√™t.</p>
  </section>

  <!-- ================= MIEL DE SOLOGNE ================= -->
  <section>
    <h2>üçØ Miel de Sologne</h2>
    <div class="products">
      <!-- 250g -->
      <div class="product">
        <h3>Pot 250g</h3>
        <img src="images/miel_sologne_250.jpg" alt="Miel de Sologne 250g">
        <p class="price">5 ‚Ç¨ (Retrait) / 12,35 ‚Ç¨ (Colissimo) / 9,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-SOLOGNE-250"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "U7HHZ2MV5R6TC" }).render("#paypal-container-SOLOGNE-250");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
      <!-- 500g -->
      <div class="product">
        <h3>Pot 500g</h3>
        <img src="images/miel_sologne_500.jpg" alt="Miel de Sologne 500g">
        <p class="price">7 ‚Ç¨ (Retrait) / 16,40 ‚Ç¨ (Colissimo) / 12,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-SOLOGNE-500"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "HY4HXWCBGYW64" }).render("#paypal-container-SOLOGNE-500");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
      <!-- 1kg -->
      <div class="product">
        <h3>Pot 1kg</h3>
        <img src="images/miel_sologne_1kg.jpg" alt="Miel de Sologne 1kg">
        <p class="price">13 ‚Ç¨ (Retrait) / 26,10 ‚Ç¨ (Colissimo) / 19,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-SOLOGNE-1KG"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "MPBDHAXGTH6X8" }).render("#paypal-container-SOLOGNE-1KG");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
    </div>
  </section>

  <!-- ================= MIEL DE FOR√äT ================= -->
  <section>
    <h2>üå≤ Miel de For√™t</h2>
    <div class="products">
      <!-- 250g -->
      <div class="product">
        <h3>Pot 250g</h3>
        <img src="images/miel_foret_250.jpg" alt="Miel de For√™t 250g">
        <p class="price">5 ‚Ç¨ (Retrait) / 12,35 ‚Ç¨ (Colissimo) / 9,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-FORET-250"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "HA6MAKZGWNV54" }).render("#paypal-container-FORET-250");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
      <!-- 500g -->
      <div class="product">
        <h3>Pot 500g</h3>
        <img src="images/miel_foret_500.jpg" alt="Miel de For√™t 500g">
        <p class="price">7 ‚Ç¨ (Retrait) / 16,40 ‚Ç¨ (Colissimo) / 12,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-FORET-500"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "YMTU6MUEZ5FRQ" }).render("#paypal-container-FORET-500");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
      <!-- 1kg -->
      <div class="product">
        <h3>Pot 1kg</h3>
        <img src="images/miel_foret_1kg.jpg" alt="Miel de For√™t 1kg">
        <p class="price">13 ‚Ç¨ (Retrait) / 26,10 ‚Ç¨ (Colissimo) / 19,40 ‚Ç¨ (Relay)</p>
        <div id="paypal-container-FORET-1KG"></div>
        <script>paypal.HostedButtons({ hostedButtonId: "HWZVZPMEPQ9G2" }).render("#paypal-container-FORET-1KG");</script>
        <a href="#formulaire-commande" class="form-link">üìù Remplir le formulaire apr√®s paiement</a>
      </div>
    </div>
  </section>

  <!-- ================= FORMULAIRE ================= -->
  <section id="formulaire-commande">
    <h2>üì¶ Confirmation de commande</h2>
    <p>Merci de remplir ce formulaire apr√®s votre paiement PayPal pour que nous puissions exp√©dier votre commande.</p>

    <form action="https://formspree.io/f/mrbajnvb" method="POST">
      <label for="name">Nom et pr√©nom :</label>
      <input type="text" id="name" name="name" required>

      <label for="address">Adresse postale compl√®te :</label>
      <textarea id="address" name="address" rows="3" required></textarea>

      <label for="postal">Code postal :</label>
      <input type="text" id="postal" name="postal" placeholder="75001" required>

      <label for="relay">Choix du point relais (automatique si disponible) :</label>
      <select id="relay" name="relay"></select>
      <p id="relay-fallback" style="color:red;display:none;">
        Impossible de charger la liste automatique.<br>
        Merci de saisir manuellement votre point relais ci-dessous :
      </p>
      <input type="text" id="relay-manual" name="relay_manual" placeholder="Ex : 034439 - ARS INFORMATIQUE, 75001 PARIS">

      <label for="email">Adresse email :</label>
      <input type="email" id="email" name="_replyto" required>

      <label for="phone">T√©l√©phone :</label>
      <input type="tel" id="phone" name="phone">

      <label for="product">Produit command√© :</label>
      <input type="text" id="product" name="product" placeholder="Ex: Miel de For√™t 500g ‚Äì 2 pots ‚Äì Colissimo">

      <button type="submit">‚úÖ Confirmer ma commande</button>
    </form>
  </section>

  <!-- ================= CONTACT ================= -->
  <section>
    <h2>Contact</h2>
    <p>üìç Les Bordes 45460</p>
    <p>üìß apilesbordes@hotmail.com</p>
    <p>üìû 0651721612</p>
    <p class="note">Pour de plus grandes quantit√©s, m‚Äôenvoyer un mail üì©</p>
  </section>

  <footer>
    ¬© 2025 Apilesbordes - Tous droits r√©serv√©s
  </footer>

  <!-- Script relais -->
  <script>
    // Charger la liste des points relais
    async function loadRelays(cp) {
      try {
        const res = await fetch(`https://apilesbordes.synology.me/mondialrelay.php?cp=${cp}`);
        if (!res.ok) throw new Error("R√©ponse serveur invalide");
        const data = await res.json();

        const relaySelect = document.getElementById("relay");
        relaySelect.innerHTML = "";

        if (data.error || data.length === 0) {
          document.getElementById("relay-fallback").style.display = "block";
          return;
        }

        document.getElementById("relay-fallback").style.display = "none";
        data.forEach(r => {
          let opt = document.createElement("option");
          opt.value = `${r.num} - ${r.nom}, ${r.cp} ${r.ville}`;
          opt.textContent = `${r.nom}, ${r.cp} ${r.ville}`;
          relaySelect.appendChild(opt);
        });
      } catch (e) {
        document.getElementById("relay-fallback").style.display = "block";
      }
    }

    document.getElementById("postal").addEventListener("change", e => {
      const cp = e.target.value.trim();
      if (cp.length === 5) loadRelays(cp);
    });
  </script>
</body>
</html>
